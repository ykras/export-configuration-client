{"version":3,"sources":["index.js"],"names":[],"mappings":"AAAA;;;;;;;;AAEA;;;;AACA;;AACA;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AAEA,IAAM,gBAAgB,SAAhB,aAAgB;AAAA,SAAU;AAC9B,UAAM,MAAM,kBADkB;AAE9B,YAAQ,MAAM;AAFgB,GAAV;AAAA,CAAtB;;AAKA,IAAM,qBAAqB,+BAAgB,iBAAK,iBAAL,CAAhB,EAAyC,aAAzC,CAA3B;AACA,IAAM,0BAA0B,oCAAqB,iBAAK,oBAAL,CAArB,EAAiD,IAAjD,CAAhC;;AAEA,IAAM,SAAS,oBACb,+BAAgB,aAAhB,CADa,EAEb,kBAFa,EAGb,uBAHa,wBAAf;;AAMA,IAAM,gBAAgB,SAAhB,aAAgB,QAAS;AAAA,MACtB,SADsB,GACF,KADE,CACtB,SADsB;AAAA,MACX,KADW,GACF,KADE,CACX,KADW;;AAE7B,SACE;AAAA;AAAA,MAAK,OAAO,KAAZ,EAAmB,WAAW,0BAAW,eAAX,EAA4B,SAA5B,CAA9B;AACE,kCAAC,MAAD,eAAY,KAAZ,IAAmB,WAAU,gBAA7B;AADF,GADF;AAKD,CAPD;;AASA,cAAc,SAAd,GAA0B;AACxB,sBAAoB,iBAAU,IAAV,CAAe,UADX;AAExB,mBAAiB,iBAAU,MAAV,CAAiB,UAFV;AAGxB,sBAAoB,iBAAU,MAAV,CAAiB,UAHb;AAIxB,gBAAc,iBAAU,MAJA;AAKxB,aAAW,iBAAU,MALG;AAMxB,SAAO,iBAAU,MANO;AAOxB,uBAAqB,iBAAU,IAAV,CAAe;AAPZ,CAA1B;;AAUA,cAAc,YAAd,GAA6B;AAC3B,aAAW,IADgB;AAE3B,SAAO,IAFoB;AAG3B,kBAAgB;AAHW,CAA7B;;AAMA,IAAM,kBAAkB,SAAlB,eAAkB,QAAS;AAC/B,MAAM,kBAAkB,oBAAU,0BAAV,CAAqC,KAArC,CAAxB;AACA,SAAO;AACL,oCADK;AAEL,wBAAoB,oBAAU,UAAV,CAAqB,KAArB,EAA4B,uBAAa,WAAb,CAAyB,eAAzB,CAA5B,CAFf;AAGL,kBAAc,oBAAU,eAAV,CAA0B,KAA1B;AAHT,GAAP;AAKD,CAPD;;AASA,IAAM,2BAA2B;AAC/B,uBAAqB,kBAAe,8BADL;AAE/B,sBAAoB,kBAAe;AAFJ,CAAjC;;kBAKe,yBAAQ,eAAR,EAAyB,wBAAzB,EAAmD,aAAnD,C","file":"index-compiled.js","sourcesContent":["'use strict';\r\n\r\nimport React, {PropTypes} from 'react';\r\nimport {connect} from 'react-redux';\r\nimport './CollageEditor.css';\r\nimport classNames from 'classnames';\r\nimport actionCreators from '../../store/actions';\r\nimport selectors from '../../store/selectors';\r\nimport ImageEditor from '../ImageEditor';\r\nimport withLoadingIndicator from '../../higher_order_components/withLoadingIndicator';\r\nimport withDataRequest from '../../higher_order_components/withDataFetch/withDataRequest';\r\nimport withDataRefresh from '../../higher_order_components/withDataFetch/withDataRefresh';\r\nimport requestTypes from '../../common/requestTypes';\r\nimport {prop, compose} from 'ramda';\r\n\r\nconst selectRequest = props => ({\r\n  send: props.requestReadCollage,\r\n  params: props.violationTypeId\r\n});\r\n\r\nconst andWithDataRefresh = withDataRefresh(prop('violationTypeId'), selectRequest);\r\nconst andWithLoadingIndicator = withLoadingIndicator(prop('readCollageRequest'), null);\r\n\r\nconst Editor = compose(\r\n  withDataRequest(selectRequest),\r\n  andWithDataRefresh,\r\n  andWithLoadingIndicator,\r\n)(ImageEditor);\r\n\r\nconst CollageEditor = props => {\r\n  const {className, style} = props;\r\n  return (\r\n    <div style={style} className={classNames('CollageEditor', className)}>\r\n      <Editor {...props} className=\"picture-height\"/>\r\n    </div>\r\n  );\r\n};\r\n\r\nCollageEditor.propTypes = {\r\n  requestReadCollage: PropTypes.func.isRequired,\r\n  violationTypeId: PropTypes.string.isRequired,\r\n  readCollageRequest: PropTypes.object.isRequired,\r\n  imageDataUrl: PropTypes.string,\r\n  className: PropTypes.string,\r\n  style: PropTypes.object,\r\n  onRectangleSelected: PropTypes.func.isRequired\r\n};\r\n\r\nCollageEditor.defaultProps = {\r\n  className: null,\r\n  style: null,\r\n  collageDataUrl: null\r\n};\r\n\r\nconst mapStateToProps = state => {\r\n  const violationTypeId = selectors.getSelectedViolationTypeId(state);\r\n  return {\r\n    violationTypeId,\r\n    readCollageRequest: selectors.getRequest(state, requestTypes.readCollage(violationTypeId)),\r\n    imageDataUrl: selectors.getCollageImage(state)\r\n  };\r\n};\r\n\r\nconst mapActionCreatorsToProps = {\r\n  onRectangleSelected: actionCreators.updateCollageSelectedRectangle,\r\n  requestReadCollage: actionCreators.requestReadCollage\r\n};\r\n\r\nexport default connect(mapStateToProps, mapActionCreatorsToProps)(CollageEditor);\r\n"]}