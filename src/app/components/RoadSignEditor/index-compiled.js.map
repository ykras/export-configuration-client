{"version":3,"sources":["index.js"],"names":[],"mappings":"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","file":"index-compiled.js","sourcesContent":["'use strict';\r\n\r\nimport React, {PropTypes} from 'react';\r\nimport {connect} from 'react-redux';\r\nimport './RoadSignEditor.css';\r\nimport classNames from 'classnames';\r\nimport selectors from '../../store/selectors';\r\nimport localizedStrings from '../../localization';\r\nimport {capitalize, toString, toNumber, isNaN} from 'lodash';\r\nimport {curry} from 'ramda';\r\nimport FileUploader from '../FileUploader';\r\nimport requestTypes from '../../common/requestTypes';\r\nimport TextInput from '../TextInput';\r\nimport Button from '../Button';\r\n\r\nconst handleEditingOf = curry((paramName, handler, currentRoadSign, newParamValue) => {\r\n  const newRoadSign = {...currentRoadSign,\r\n    [paramName]: isNaN(toNumber(newParamValue)) ? 0 : toNumber(newParamValue)};\r\n  handler(newRoadSign);\r\n});\r\n\r\nconst handleRectSelect = (handler, curRoadSign, rect) => () => {\r\n  const newRoadSign = {\r\n    ...curRoadSign,\r\n    x: rect.x,\r\n    y: rect.y,\r\n    width: rect.w,\r\n    height: rect.h\r\n  };\r\n  handler(newRoadSign);\r\n};\r\n\r\nconst handleApply = (handler, roadSign) => () => handler(roadSign);\r\n\r\nconst RoadSignEditor = ({style, className, roadSign, uploadRoadSignFile,\r\n  roadSignFileUploadStatus, onEdit, onApply, selectedRectangle}) => (\r\n  <div style={style} className={classNames('RoadSignEditor', className)}>\r\n    <div className=\"row\">\r\n      <div className=\"col-xs-12\">\r\n        {`${capitalize(localizedStrings.CollageRoadSignFile)}:`}\r\n      </div>\r\n    </div>\r\n    <div className=\"row\">\r\n      <div className=\"col-xs-12\">\r\n        <FileUploader\r\n          selectButtonText={capitalize(localizedStrings.SelectFileButtonText)}\r\n          fileNamePlaceholder={capitalize(localizedStrings.SelectedFileNamePlaceholder)}\r\n          uploadButtonText={capitalize(localizedStrings.UploadFileButtonText)}\r\n          fileNameLabel={capitalize(localizedStrings.FileNameLabel)}\r\n          fileSizeLabel={capitalize(localizedStrings.FileSizeLabel)}\r\n          uploadFile={uploadRoadSignFile}\r\n          fileUploadStatus={roadSignFileUploadStatus}\r\n          style={{marginBottom: '10px'}}\r\n          />\r\n      </div>\r\n    </div>\r\n    <div className=\"row\">\r\n      <div className=\"col-xs-12\">\r\n        {`${capitalize(localizedStrings.CollageRoadSignPositionAndSize)}:`}\r\n      </div>\r\n    </div>\r\n    <div className=\"row\">\r\n      <div className=\"col-xs-1\">\r\n        X:\r\n      </div>\r\n      <div className=\"col-xs-3\">\r\n        <TextInput\r\n          id=\"x\" value={toString(roadSign.x)}\r\n          onTextChanged={handleEditingOf('x', onEdit, roadSign)}\r\n          />\r\n      </div>\r\n      <div className=\"col-xs-1 col-xs-offset-1\">\r\n        Y:\r\n      </div>\r\n      <div className=\"col-xs-3\">\r\n        <TextInput\r\n          id=\"srcY\" value={toString(roadSign.y)}\r\n          onTextChanged={handleEditingOf('y', onEdit, roadSign)}\r\n          />\r\n      </div>\r\n      <div className=\"col-xs-1 col-xs-offset-1\">\r\n        <Button\r\n          iconPath={require(\"../../images/select_rect.png\")} style={{padding: 0}}\r\n          disabled={selectedRectangle === null}\r\n          onClick={handleRectSelect(onEdit, roadSign, selectedRectangle)}\r\n          />\r\n      </div>\r\n    </div>\r\n    <div className=\"row\">\r\n      <div className=\"col-xs-1\">\r\n        W:\r\n      </div>\r\n      <div className=\"col-xs-3\">\r\n        <TextInput\r\n          id=\"srcW\" value={toString(roadSign.width)}\r\n          onTextChanged={handleEditingOf('width', onEdit, roadSign)}\r\n          />\r\n      </div>\r\n      <div className=\"col-xs-1 col-xs-offset-1\">\r\n        H:\r\n      </div>\r\n      <div className=\"col-xs-3\">\r\n        <TextInput\r\n          id=\"srcH\" value={toString(roadSign.height)}\r\n          onTextChanged={handleEditingOf('height', onEdit, roadSign)}\r\n          />\r\n      </div>\r\n    </div>\r\n    <div className=\"row\">\r\n      <div className=\"col-xs-4 col-xs-offset-7\">\r\n        <Button\r\n          text={capitalize(localizedStrings.Apply)}\r\n          disabled={!roadSign.stale}\r\n          onClick={handleApply(onApply, roadSign)}\r\n          />\r\n      </div>\r\n    </div>\r\n  </div>\r\n);\r\n\r\nRoadSignEditor.propTypes = {\r\n  style: PropTypes.object,\r\n  className: PropTypes.string,\r\n  roadSign: PropTypes.shape({\r\n    x: PropTypes.number,\r\n    y: PropTypes.number,\r\n    width: PropTypes.number,\r\n    height: PropTypes.number,\r\n    filePath: PropTypes.string\r\n  }).isRequired,\r\n  selectedRectangle: PropTypes.shape({\r\n    x: PropTypes.number,\r\n    y: PropTypes.number,\r\n    w: PropTypes.number,\r\n    h: PropTypes.number\r\n  }),\r\n  uploadRoadSignFile: PropTypes.func,\r\n  roadSignFileUploadStatus: PropTypes.string,\r\n  onEdit: PropTypes.func,\r\n  onApply: PropTypes.func\r\n};\r\n\r\nRoadSignEditor.defaultProps = {\r\n  style: null,\r\n  className: null,\r\n  selectedRectangle: null,\r\n  uploadRoadSignFile: () => {},\r\n  roadSignFileUploadStatus: null,\r\n  onEdit: () => {},\r\n  onApply: () => {}\r\n};\r\n\r\nconst mapStateToProps = state => {\r\n  const roadSignFileUploadRequest = selectors.getRequest(state,\r\n    requestTypes.uploadCollageRoadSignFile(selectors.getSelectedViolationTypeId(state)));\r\n  return {\r\n    selectedRectangle: selectors.getCollageSelectedRectangle(state),\r\n    roadSignFileUploadStatus: roadSignFileUploadRequest ? roadSignFileUploadRequest.status : null\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps)(RoadSignEditor);\r\n"]}